@isTest
private class WarehouseCalloutServiceTest {
    
    @isTest
    static void testCallout() {
        // Create test data
        Maintenance_Request__c maintenanceRequest = new Maintenance_Request__c(
            Name = 'Test Maintenance Request',
            Status__c = 'New',
            Equipment__c = 'Test Equipment',
            Vehicle__c = 'Test Vehicle'
        );
        insert maintenanceRequest;

        // Set mock callout response
        String mockResponse = '[{"name":"Test Warehouse", "address":"123 Test St.", "city":"Test City", "state":"Test State", "zip":"12345"}]';
        Test.setMock(HttpCalloutMock.class, new WarehouseCalloutServiceMock(mockResponse));

        // Call the service
        WarehouseCalloutService warehouseService = new WarehouseCalloutService();
        String response = warehouseService.getWarehouse(maintenanceRequest.Id);

        // Verify results
        System.assertEquals(mockResponse, response);
    }
    
    @isTest
    static void testCalloutWithError() {
        // Create test data
        Maintenance_Request__c maintenanceRequest = new Maintenance_Request__c(
            Name = 'Test Maintenance Request',
            Status__c = 'New',
            Equipment__c = 'Test Equipment',
            Vehicle__c = 'Test Vehicle'
        );
        insert maintenanceRequest;

        // Set mock callout response
        Test.setMock(HttpCalloutMock.class, new WarehouseCalloutServiceMock(null));

        // Call the service
        WarehouseCalloutService warehouseService = new WarehouseCalloutService();
        String response = warehouseService.getWarehouse(maintenanceRequest.Id);

        // Verify results
        System.assertEquals(null, response);
    }
    
}
